<!DOCTYPE html>
<html>
<head><title>Inscription</title><style>
  .flash-box { margin: 12px 0; }
  .flash { padding: 10px; border-radius: 8px; margin: 6px 0; }
  .flash.error { background: #ffe6e6; color: #a40000; border: 1px solid #ffb3b3; }
  .flash.success { background: #e6ffea; color: #00661a; border: 1px solid #a6f3b1; }
  .user-badge { position: fixed; top: 10px; right: 12px; font-family: Arial, sans-serif;
                background: rgba(0,0,0,0.6); color:#fff; padding: 6px 10px; border-radius: 12px;
                font-size: 12px; z-index: 9999; }
  .user-badge a { color:#ffd1d1; text-decoration:none; margin-left:8px; }
</style>
</head>
<body>
  {% if current_username %}
  <div class="user-badge">
    Logged as {{ current_username }} <a href="/logout" title="Log out">Logout</a>
  </div>
  {% endif %}

  <h2>Create an account</h2>
  <form method="POST">
    Username : <input type="text" name="username"><br>
    Password : <input type="password" name="password"><br>
    Confirm password : <input type="password" name="confirm"><br>
    Secret code : <input type="text" name="code"><br>
    <input type="submit" value="Register">
  </form>
  <p>Already have an account? <a href="/login">Login</a></p>
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-box">
      {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

</body>
</html>
